{% extends "core/base.html" %}
{% load static %}

{% block title %}Editar Sistemática: {{ systematic.name }}{% endblock %}

{% block content %}
<div class="container mt-4">
    <h2 class="mb-4">Editar Sistemática: <small class="text-muted">{{ systematic.name }}</small></h2>

    <form method="post" novalidate>
        {% csrf_token %}

        <ul class="nav nav-tabs mb-3" id="formTab" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="geral-tab" data-bs-toggle="tab" data-bs-target="#geral" type="button" role="tab">Geral</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="param-tab" data-bs-toggle="tab" data-bs-target="#param" type="button" role="tab">Parâmetros</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="desc-tab" data-bs-toggle="tab" data-bs-target="#desc" type="button" role="tab">Descrição & Segurança</button>
            </li>
        </ul>

        <div class="tab-content" id="formTabContent">
            <!-- Aba: Geral -->
            <div class="tab-pane fade show active" id="geral" role="tabpanel">
                <div class="row">
                    <div class="col-md-6 mb-3">
                        {{ form.name.label_tag }} {{ form.name }}
                        {% for error in form.name.errors %}
                            <div class="invalid-feedback d-block">{{ error }}</div>
                        {% endfor %}
                    </div>
                    <div class="col-md-6 mb-3">
                        {{ form.tipo_systematic.label_tag }} {{ form.tipo_systematic }}
                        {% for error in form.tipo_systematic.errors %}
                            <div class="invalid-feedback d-block">{{ error }}</div>
                        {% endfor %}
                    </div>
                    <div class="col-md-6 mb-3">
                        {{ form.equipment.label_tag }} {{ form.equipment }}
                        {% for error in form.equipment.errors %}
                            <div class="invalid-feedback d-block">{{ error }}</div>
                        {% endfor %}
                    </div>
                </div>
            </div>

            <!-- Aba: Parâmetros -->
            <div class="tab-pane fade" id="param" role="tabpanel">
                <div class="row">
                    <div class="col-md-6 mb-3">
                        {{ form.range_days.label_tag }} {{ form.range_days }}
                        {% for error in form.range_days.errors %}
                            <div class="invalid-feedback d-block">{{ error }}</div>
                        {% endfor %}
                    </div>
                    <div class="col-md-6 mb-3">
                        {{ form.time_estimated_minutes.label_tag }} {{ form.time_estimated_minutes }}
                        {% for error in form.time_estimated_minutes.errors %}
                            <div class="invalid-feedback d-block">{{ error }}</div>
                        {% endfor %}
                    </div>
                    <div class="col-md-6 mb-3 form-check mt-4">
                        {{ form.is_active }} {{ form.is_active.label_tag }}
                        {% for error in form.is_active.errors %}
                            <div class="invalid-feedback d-block">{{ error }}</div>
                        {% endfor %}
                    </div>
                </div>
            </div>

            <!-- Aba: Descrição e Segurança -->
            <div class="tab-pane fade" id="desc" role="tabpanel">
                <div class="mb-3">
                    {{ form.description.label_tag }} {{ form.description }}
                    {% for error in form.description.errors %}
                        <div class="invalid-feedback d-block">{{ error }}</div>
                    {% endfor %}
                </div>
                <div class="mb-3">
                    {{ form.safety_instructions.label_tag }} {{ form.safety_instructions }}
                    {% for error in form.safety_instructions.errors %}
                        <div class="invalid-feedback d-block">{{ error }}</div>
                    {% endfor %}
                </div>
            </div>
        </div>

        <div class="text-end mt-4">
            <button type="submit" class="btn btn-primary">Salvar Alterações</button>
            <a href="{% url 'core:systematic_detail' systematic.pk %}" class="btn btn-outline-secondary">Cancelar</a>
        </div>
    </form>
</div>
{% endblock %}

{% block extra_js %}
<script>
   
</script>
{% endblock %}
